<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Pengguna</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <script>
        validateAccess("user");
    </script>

    <!-- Navbar diambil dari script di halaman sebelumnya -->

    <div class="container mt-5">
        <h2 class="text-center mb-4">Manajemen Pengguna</h2>
        <button class="btn btn-success mb-4" onclick="showAddUserForm()">Tambah Pengguna</button>
        <table class="table table-striped" id="userTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nama</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                <!-- Daftar pengguna akan dimuat di sini -->
            </tbody>
        </table>
    </div>

    <script>
        const users = JSON.parse(localStorage.getItem("users")) || [];

        // Render daftar pengguna
        const renderUsers = () => {
            const userTable = document.getElementById("userTable").getElementsByTagName('tbody')[0];
            userTable.innerHTML = "";
            users.forEach(user => {
                let row = userTable.insertRow();
                row.insertCell(0).innerText = user.id;
                row.insertCell(1).innerText = user.name;
                row.insertCell(2).innerText = user.email;
                row.insertCell(3).innerText = user.role;
                let deleteButton = document.createElement("button");
                deleteButton.classList.add("btn", "btn-danger");
                deleteButton.innerText = "Hapus";
                deleteButton.onclick = () => deleteUser(user.id);
                row.insertCell(4).appendChild(deleteButton);
            });
        };

        // Hapus pengguna
        const deleteUser = (id) => {
            const index = users.findIndex(u => u.id === id);
            if (index !== -1) {
                users.splice(index, 1);
                localStorage.setItem("users", JSON.stringify(users));
                renderUsers();
            }
        };

        // Menambahkan pengguna
        const showAddUserForm = () => {
            // Logic untuk menampilkan form tambah pengguna
            alert("Form tambah pengguna");
        };

        renderUsers();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
